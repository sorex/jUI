@{
    ViewBag.Title = "datetimepickerHtml";
}

@section head{
    <style type="text/css">
        
    .jui-datetimepicker a {
        padding:0px;
    }
    /*圆角*/
    /*.jui-datetimepicker-corner-all{
        -moz-border-radius-topright: 4px;
        -webkit-border-top-right-radius: 4px;
        -khtml-border-top-right-radius: 4px;
        -border-top-right-radius: 4px;
        -moz-border-radius-bottomright: 4px;
        -webkit-border-bottom-right-radius: 4px;
        -khtml-border-bottom-right-radius: 4px;
        -border-bottom-right-radius: 4px;
        -moz-border-radius-bottomleft: 4px;
        -webkit-border-bottom-left-radius: 4px;
        -khtml-border-bottom-left-radius: 4px;
        -border-bottom-left-radius: 4px;
        -moz-border-radius-topleft: 4px;
        -webkit-border-top-left-radius: 4px;
        -khtml-border-top-left-radius: 4px;
        -border-top-left-radius: 4px;
    }*/
    /*外层div*/    
    .jui-datetimepicker {
        width:220px;
        background-color:#f3f3f3;
        padding: .2em .2em 0;
        border:1px solid #DDD;
        font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif;
        font-size: 0.8em;
    }
    /*头部div样式*/    
    .jui-datetimepicker-dhcenter{
        width:160px;
        margin: 0 0 0 2.4em;
        line-height: 1.8em;
        text-align: center;
        color: white;
    }/*头部div中中间div样式*/  
    .jui-datetimepicker-dhead{
        width:220px; 
        background-color:#094ab2;
        font-weight: bold;
        border: 1px solid #062f72;
        padding: .2em 0; 
        position:relative;
    }    
    .jui-datetimepicker-dhead a{ display:block; position:absolute; width:22px; height:22px; top:3px;}/*左右翻页按钮样式*/
    .jui-datetimepicker-dhead a:hover{ background-color:#062f72;}/*鼠标覆盖翻页按钮后样式*/
    .jui-datetimepicker-dhead a span{position:absolute;top: 2px;display: block;position: absolute;left: 50%;margin-left: -8px;top: 50%;margin-top: -8px;}/*按钮图片定位*/
    .jui-datetimepicker-al span{ left:2px;right:auto;top:3px;cursor:pointer;}/*左图标定位*/    
    .jui-datetimepicker-ar{ left:auto; right:2px; top:3px; cursor:pointer;}/*右图标定位*/  
    .jui-datetimepicker-select{
        width:75px;
        font-family: Verdana,Arial,sans-serif;
    }    
    .jui-datetimepicker .jui-datetimepicker-active{
        border: 1px solid #062f72;
        background-color: #062f72;
        font-weight: bold;
        color: #ffffff;
        outline: none;
        display: block;
        /*padding: .2em;*/
        text-decoration: none;
    }/*点击选中项 */     
    .jui-datetimepicker-unactive{border: 1px solid #CCC;background: #F6F6F6;font-weight: bold;color: #1C94C4;outline: none;display: block;padding: .2em;text-decoration: none;}/*未点击选中项*/
    .jui-datetimepicker-table-tr-a{        
        border: 1px solid #bababa;
        background-color: #ffffff;
        font-weight: bold;
        color:  #094ab2;
        outline: none;
        display: block;
        /*padding: .2em;*/
        margin: .2em;
        text-decoration: none;
    }/*表格内容样式*/

     /*鼠标移动到单元格上*/
    .jui-datetimepicker-table tr a:hover{ 
        border:1px solid #062f72;
        background-color:#073d92;
        font-weight:bold; 
        color:#ffffff; 
        outline:none;
    }
    .jui-datetimepicker-table{ width:220px; margin-top:5px;}/*内容表格样式*/
    .jui-datetimepicker-table tr{ text-align:center;}/*表格内容居中*/
    .jui-datetimepicker-week{font-weight: bold;color: Black;outline: none;display: block;padding: .2em;font-weight:bolder;}/*星期样式*/
    .jui-datetimepicker-al-span_text_toggle{width:20px;}/*点击年份后生成的输入框样式*/
    /*时分秒样式*/
    .jui-datetimepicker-hms{ font-size:80%;}
    .jui-datetimepicker-hms dl dt{height: 25px;margin-bottom: -25px;}
    .jui-datetimepicker-hms dl dd{margin: 0 10px 10px 65px;}
    .jui-datetimepicker-hms dl{ text-align:left;}
    .jui-datetimepicker-slider{
        position: relative;
        text-align: left;
        height: .8em;
        font-size: 1em;
        border: 1px solid #DDD;
        background: #FFF 50% top repeat-x;
        color: #333;
    }    
    .jui-datetimepicker-handle{
        top: -.3em;margin-left: -.6em;border: 1px solid #CCC;
        background: #F6F6F6 50% 50% repeat-x;
        font-weight: bold;
        color: #1C94C4;position: absolute;
        z-index: 2;
        width: 1.2em;
        height: 1.2em;
        cursor: default;
    }    
    .jui-datetimepicker-focus,.jui-datetimepicker-handle:hover,.jui-datetimepicker-butNow:hover,.jui-datetimepicker-butDone:hover{
        border: 1px solid #FBCB09;
        background: #FDF5CE;
        font-weight: bold;
        color: #C77405;
    }
    /*分割线*/
    .jui-datetimepicker-content{
        border: 1px solid #DDD;
        background: #EEE  50% top repeat-x;
        color: #333;background-image: none;
        margin: .7em 0 0 0;
        padding: 0 .2em;
        border-left: 0;
        border-right: 0;
        border-bottom: 0;
    }
    /*左按钮*/
    .jui-datetimepicker-butNow{
        margin: .5em .2em .4em;
        cursor: pointer;
        padding: .2em .6em .3em .6em;
        width: auto;
        overflow: visible;border: 1px solid #CCC;
        background: #F6F6F6 50% 50% repeat-x;
        font-weight: bold;
        color: #1C94C4;
    }
    /*右按钮*/
    .jui-datetimepicker-butDone{
        float: right;
        margin: .5em .2em .4em;
        cursor: pointer;
        padding: .2em .6em .3em .6em;
        width: auto;
        overflow: visible;border: 1px solid #CCC;
        background: #F6F6F6  50% 50% repeat-x;
        font-weight: bold;
        color: #1C94C4;
    }
    
        .jui-datetimepicker-now {
            border: 1px solid #bababa;
            font-weight: bold;
            color:  #094ab2;
            outline: none;
            display: block;
            /*padding: .2em;*/
            margin: .2em;
            text-decoration: none;
            background-color:#bababa;
        }/*当前日期高亮*/
    </style>
	<script type="text/javascript">
	    var data = {
	        datetimeType: ""
            , datetimeParse: ""
            , display: ""
            , readonly: null
	    };
	    $(function () {
	        var e = $("#txt_datapicker");
	        $(document).bind("selectstart", function () { return false; });

	        var datetimeType = data.datetimeType;
	        var datetimeParse = data.datetimeParse;
	        var display = data.display;
	        var readonly = data.readonly;
	        var date = new Date();
	        var y = date.getFullYear(); //今年
	        var m = date.getMonth();//当月
	        var longMonthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
	        var shortMonthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
	        var shortWeek = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];
	        var longWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	        var shortWeekCN = ['日', '一', '二', '三', '四', '五', '六'];
	        var longWeekCN = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
	        var MonthNamesCN = ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'];

	        var fullDay = [1, 3, 5, 7, 8, 10, 12];
	        var maxDay = null;
	        var max = false;
	        var weekResult = null;//列
	        var roll = null;//行               
	        var elementId = e.attr("id");
	        var t = 0;
	        var _t = 1;
	        if (datetimeParse == "yyyy-MM-dd") {
	            t = 1;
	            _t = 0;
	        }
	        //外层div
	        var outDiv = "<div id='" + elementId + "_outDiv' class='jui-datetimepicker'></div>";
	        //头部
	        var head = "<div id='" + elementId + "_headDiv' class='jui-datetimepicker-dhead jui-datetimepicker-corner-all'>"
            + "<a id='" + elementId + "_prev' title='上一页' class='jui-datetimepicker-al jui-datetimepicker-corner-all'><span class='ui-icon ui-icon-circle-triangle-w'>&nbsp;</span></a>"
            + "<a id='" + elementId + "_next' title='下一页' class='jui-datetimepicker-ar jui-datetimepicker-corner-all'><span class='ui-icon ui-icon-circle-triangle-e'>&nbsp;</span></a>"
            + "<div id='" + elementId + "_yearDiv' class='jui-datetimepicker-dhcenter'><span>" + (y - 5) + "~" + (y + 4) + "</span></div>"
            + "</div>";
	        //text占一行
	        e.wrap("<p></p>").after(outDiv);
	        //添加头部内容
	        $("#" + elementId + "_outDiv").append(head);
	        //填日期
	        var writeDate = function () {
	            var selectedY = parseInt($("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val());//当前选择的年份
	            var selectedM = parseInt($("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val()) + 1;//当前选择的月份
	            var fullDay = [1, 3, 5, 7, 8, 10, 12];
	            var maxDay = null;
	            var max = false;
	            $.each(fullDay, function (key, val) {
	                if (val == selectedM)
	                    max = true;
	            });
	            if (max) {
	                maxDay = 31;
	            } else {
	                if (selectedM == 2) {
	                    if ((selectedY % 4 == 0 && selectedY % 100 != 0) || (selectedY % 400 == 0)) {
	                        maxDay = 29;
	                    } else {
	                        maxDay = 28;
	                    }
	                } else {
	                    maxDay = 30;
	                }
	            }
	            var myDate = new Date();
	            myDate.setFullYear(selectedY);
	            myDate.setMonth(selectedM - 1);
	            myDate.setDate(1);
	            var fir = myDate.getDay();//例:0(周日)
	            var weekResult = null;//列
	            var roll = null;//行           
	            for (var i = 1; i <= maxDay; i++) {
	                $("#" + elementId + "_tb").find("tr:eq(6)").remove();
	                myDate.setDate(i);
	                weekResult = myDate.getDay();//例:0(周日)
	                if (i < (8 - fir))
	                    roll = 1;
	                if (i >= (8 - fir) && i < (15 - fir))
	                    roll = 2;
	                if (i >= (15 - fir) && i < (22 - fir))
	                    roll = 3;
	                if (i >= (22 - fir) && i < (29 - fir))
	                    roll = 4;
	                if (i >= (29 - fir) && i < (36 - fir))
	                    roll = 5;
	                if (i >= (36 - fir)) {
	                    roll = 6;
	                    $("#" + elementId + "_tb").append("<tr></tr>");
	                    if (i == 31) {
	                        $("#" + elementId + "_tb").find("tr:eq(6)").empty();
	                        if (fir == 5)
	                            $("#" + elementId + "_tb").find("tr:eq(6)").append("<td ><a href='#'></a></td>");
	                        if (fir == 6)
	                            $("#" + elementId + "_tb").find("tr:eq(6)").append("<td ><a href='#'></a></td><td ><a href='#'></a></td>");
	                        $("#" + elementId + "_tb").find("tr:eq(" + roll + ")").find("td:eq(" + (weekResult - 1) + ")").find("a").html(i - 1);
	                    }
	                    if (i == 30) {
	                        $("#" + elementId + "_tb").find("tr:eq(6)").empty();
	                        $("#" + elementId + "_tb").find("tr:eq(6)").append("<td ><a href='#'></a></td>");
	                    }
	                    $("#" + elementId + "_tb").find("a").addClass("jui-datetimepicker-table-tr-a");
	                }
	                setVal();
	                $("#" + elementId + "_tb").find("tr:eq(" + roll + ")").find("td:eq(" + weekResult + ")").find("a").html(i);
	                $("#" + elementId + "_tb").find("a").addClass("jui-datetimepicker-table-tr-a");
	                activeCss();//默认高亮当日
	                
	                clickToHide();
	                noCss();
	            }

	        }
	        //去样式
	        var noCss = function () {
	            $("#" + elementId + "_tb td a").each(function () {
	                var a = $(this);
	                if (a.text() == "") {
	                    a.removeClass();
	                }
	            });
	        }
	        //默认选中当天日期的样式
	        var activeCss = function () {
	            var selectedY = parseInt($("#" + elementId + "_yearDiv").children("select:eq("+t+")").val());
	            var selectedM = parseInt($("#" + elementId + "_yearDiv").children("select:eq("+_t+")").val()) + 1;//当前选择的月份
	            $("#" + elementId + "_tb a").each(function () {
	                if ($(this).text() == date.getDate() && selectedY == date.getFullYear() && (selectedM == (date.getMonth() + 1)))
	                    $(this).removeClass("jui-datetimepicker-table-tr-a").addClass(" jui-datetimepicker-now");
	            });
	        }
	        //高亮并赋值
	        var setVal = function () {
	            $("#" + elementId + "_tb td a").click(function () {
	                var hideValue = $(this).text();
	                $("#" + elementId + "_tb td a").removeClass("jui-datetimepicker-active").addClass("jui-datetimepicker-table-tr-a");
	                $(this).addClass("jui-datetimepicker-active"); //高亮	 
	                if (hideValue != "") {
	                    var setVal_y = $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val();
	                    var setVal_M = $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val();
	                    var international_val = function (setVal_y, setVal_M) {
	                        if ((parseInt(setVal_M) + 1) < 10) {
	                            if (parseInt(hideValue) < 10) {
	                                e.val(setVal_y + "-0" + (parseInt(setVal_M) + 1) + "-0" + hideValue); //赋值                                            
	                            } else {
	                                e.val(setVal_y + "-0" + (parseInt(setVal_M) + 1) + "-" + hideValue); //赋值 
	                            }
	                        } else {
	                            if (parseInt(hideValue) < 10) {
	                                e.val(setVal_y + "-" + (parseInt(setVal_M) + 1) + "-0" + hideValue); //赋值                                            
	                            } else {
	                                e.val(setVal_y + "-" + (parseInt(setVal_M) + 1) + "-" + hideValue); //赋值                         
	                            }
	                        }
	                    }
	                    var china_val = function (setVal_y, setVal_M) {
	                        if ((parseInt(setVal_M) + 1) < 10) {
	                            if (parseInt(hideValue) < 10) {
	                                e.val(setVal_y + "年0" + (parseInt(setVal_M) + 1) + "月0" + hideValue + "日"); //赋值                                            
	                            } else {
	                                e.val(setVal_y + "年0" + (parseInt(setVal_M) + 1) + "月" + hideValue + "日"); //赋值 
	                            }
	                        } else {
	                            if (parseInt(hideValue) < 10) {
	                                e.val(setVal_y + "年" + (parseInt(setVal_M) + 1) + "月0" + hideValue + "日"); //赋值                                            
	                            } else {
	                                e.val(setVal_y + "年" + (parseInt(setVal_M) + 1) + "月" + hideValue + "日"); //赋值                         
	                            }
	                        }
	                    }
	                    switch (datetimeParse) {
	                        case 'yyyy年MM月dd日':
	                            china_val(setVal_y, setVal_M);
	                            break;
	                        case 'yyyy-MM-dd':
	                            international_val(setVal_y, setVal_M);
	                            break;
	                        default:
	                            china_val(setVal_y, setVal_M);
	                            break;
	                    }
	                }
	                noCss();
	            });
	        }
	        //添加年份
	        var addOptions = function () {
	            for (var i = y - 10; i < y; i++) {
	                var op = "";
	                if (datetimeParse == "yyyy-MM-dd") {
	                    op = "<option value='" + i + "'>" + i + "</option>";
	                    $("#" + elementId + "_yearDiv").children("select:eq(1)").append(op);
	                } else {
	                    op = "<option value='" + i + "'>" + i + "年</option>";
	                    $("#" + elementId + "_yearDiv").children("select:eq(0)").append(op);
	                }
	            }
	            for (var i = y; i <= y + 10; i++) {
	                var op = "";
	                if (datetimeParse == "yyyy-MM-dd") {
	                    op = "<option value='" + i + "'>" + i + "</option>";
	                    $("#" + elementId + "_yearDiv").children("select:eq(1)").append(op);
	                } else {
	                    op = "<option value='" + i + "'>" + i + "年</option>";
	                    $("#" + elementId + "_yearDiv").children("select:eq(0)").append(op);
	                }
	            }
	        }
	        //添加年份下拉列表
	        var addYear = function () {
	            addOptions();
	            $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").find("option").each(function () {
	                if ($(this).val() == y)
	                    $(this).attr("selected", "selected");
	            });//默认今年                
	            $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").bind("change", function () {
	                $("#" + elementId + "_tb").find("a").removeClass("jui-datetimepicker-active");
	                y = parseInt($(this).val());
	                $(this).empty();
	                addOptions();
	                $(this).children("option").removeAttr("selected");
	                $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").find("option").each(function () {
	                    if ($(this).val() == y)
	                        $(this).attr("selected", "selected");
	                });
	                $("#" + elementId + "_tb a").text("");//清空
	                writeDate();
	            });//年份动态添加          
	            $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").bind("change", function () {
	                $("#" + elementId + "_tb").find("a").removeClass("jui-datetimepicker-active");
	                $("#" + elementId + "_tb a").text("");//清空
	                writeDate();
	            });//日期随月份动态添加
	        }
	        //添加月份下拉列表
	        var addMonth = function () {
	            //添加月下拉列表
	            for (var i = 0; i < shortMonthNames.length; i++) {
	                var op = "<option value='" + i + "'>" + MonthNamesCN[i] + "</option>";
	                if (datetimeParse == "yyyy-MM-dd") {
	                    op = "<option value='" + i + "'>" + shortMonthNames[i] + "</option>";
	                }
	                $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").append(op);
	            }
	            $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").find("option").each(function () {
	                if ($(this).val() == m)
	                    $(this).attr("selected", "selected");
	            });//默认当前月
	        }
	        //高亮并赋值
	        var lightAndSetValue = function () {
	            $("#" + elementId + "_tb td").click(function () {
	                e.val($(this).text());//赋值
	                $("#" + elementId + "_tb a").removeClass("jui-datetimepicker-active").addClass("jui-datetimepicker-table-tr-a");
	                $(this).children("a").addClass("jui-datetimepicker-active");//高亮
	            });
	        }
	        //默认高亮
	        var defaultheightLight = function () {
	            $("#" + elementId + "_tb td").each(function () {
	                if ($(this).text() == e.val()) {
	                    $(this).children("a").addClass("jui-datetimepicker-active");
	                }
	            });
	        }
	        //点击消失
	        var clickToHide = function () {
	            if (display == "click" || display == "" && datetimeType != "yyyy-MM-dd-hh-mm-ss") {
	                $("#" + elementId + "_tb a").click(function () {
	                    $("#" + elementId + "_outDiv").hide();
	                });
	            }
	        }
	        //年
	        var whenYYYY = function () {
	            var table = "<table id='" + elementId + "_tb' class='jui-datetimepicker-table'></table>"; //表格
	            $("#" + elementId + "_outDiv").append(table); //添加下部内容
	            var makeCells = function (y) {
	                $("#" + elementId + "_tb").empty();
	                for (var i = 0; i < 5; i++) {
	                    $("#" + elementId + "_tb").append("<tr><td><a href='#'>" + (y - 5 + i) + "</a></td><td><a href='#'>" + (y + i) + "</a></td></tr>");
	                }
	                $("#" + elementId + "_yearDiv").text((y - 5) + "~" + (y + 4));
	                $("#" + elementId + "_tb a").addClass("jui-datetimepicker-table-tr-a");
	            }
	            //前翻页
	            $("#" + elementId + "_prev").bind("click", function () {
	                y = y - 10;
	                makeCells(y);
	                lightAndSetValue();
	                defaultheightLight();
	                clickToHide();
	            });
	            //后翻页
	            $("#" + elementId + "_next").bind("click", function () {
	                y = y + 10;
	                makeCells(y);
	                lightAndSetValue();
	                defaultheightLight();
	                clickToHide();
	            });
	            makeCells(y);
	            lightAndSetValue();
	            clickToHide();
	        }
	        //年月
	        var yM = function () {
	            var saveM;
	            $("#" + elementId + "_yearDiv").children("span").text(y);
	            $("#" + elementId + "_outDiv").append("<table id='" + elementId + "_tb' class='jui-datetimepicker-table'></table>"); //添加下部内容
	            for (var i = 0; i < 6; i++) {
	                $("#" + elementId + "_tb").append("<tr><td><a href='#'>" + (2 * i + 1) + "</a></td><td><a href='#'>" + (2 * i + 2) + "</a></td></tr>");
	            }
	            var click_yM = function (y) {
	                $("#" + elementId + "_yearDiv > span").text(y);
	            }
	            //前翻页
	            $("#" + elementId + "_prev").bind("click", function () {
	                y = y - 1;
	                click_yM(y);
	            });
	            //后翻页
	            $("#" + elementId + "_next").bind("click", function () {
	                y = y + 1;
	                click_yM(y);
	            });
	            //高亮并赋值            
	            $("#" + elementId + "_tb td").click(function () {
	                saveM = $(this).text();
	                switch (datetimeParse) {
	                    case 'yyyy年MM月dd日':
	                        e.val(y + "年" + $(this).text() + "月");
	                        break; //赋值      
	                    case 'dd MM,yyyy':
	                        for (var i = 0; i < longMonthNames.length; i++) {
	                            if ($(this).text() == (i + 1))
	                                e.val(longMonthNames[i] + "," + y); //赋值    
	                        }
	                        break;
	                    case 'yyyy-MM-dd':
	                        if ($(this).text() < 10) {
	                            e.val(y + "-0" + $(this).text()); //赋值                                     
	                        } else {
	                            e.val(y + "-" + $(this).text()); //赋值                                     
	                        }
	                        break;
	                    default:
	                        e.val(y + "年" + $(this).text() + "月"); //赋值    
	                }
	                $("#" + elementId + "_tb td a").removeClass("jui-datetimepicker-active").addClass("jui-datetimepicker-table-tr-a");
	                $(this).children("a").addClass("jui-datetimepicker-active"); //高亮	                    
	                $("#" + elementId + "_tb").find("td").each(function () {
	                    if ($(this).text() != saveM) {
	                        $(this).children("a").removeClass("jui-datetimepicker-active").addClass("jui-datetimepicker-table-tr-a");
	                    }
	                });
	            });
	            clickToHide();//点击消失
	            $("#" + elementId + "_tb td a").addClass("jui-datetimepicker-table-tr-a");
	        }
	        //年月日
	        var yMd = function () {
	            $("#" + elementId + "_yearDiv").children("span").remove("span");
	            $("#" + elementId + "_yearDiv").append("<select class='jui-datetimepicker-select'></select><select class='jui-datetimepicker-select'></select>");//年月的下拉列表
	            //if (datetimeParse == "europe" || datetimeParse == "international" || datetimeParse == "") {
	            if (datetimeParse == "yyyy-MM-dd") {
	                $("#" + elementId + "_headDiv").children("a:eq(1)").attr("title", "next");
	                $("#" + elementId + "_headDiv").children("a:eq(0)").attr("title", "previous");
	            } else {
	                $("#" + elementId + "_headDiv").children("a:eq(1)").attr("title", "下一页");
	                $("#" + elementId + "_headDiv").children("a:eq(0)").attr("title", "上一页");
	            }
	            addMonth();
	            addYear();
	            //显示日期的表格结构
	            var table = "<table id='" + elementId + "_tb' class='jui-datetimepicker-table'></table>";
	            $("#" + elementId + "_outDiv").append(table);
	            $("#" + elementId + "_tb").append("<tr></tr>");//表格头部
	            var long_week, short_week;
	            switch (datetimeParse) {
	                case 'yyyy-MM-dd':
	                    long_week = longWeek;
	                    short_week = shortWeek; break;
	                case 'yyyy年MM月dd日':
	                    long_week = longWeekCN;
	                    short_week = shortWeekCN; break;
	                default:
	                    long_week = longWeekCN;
	                    short_week = shortWeekCN; break;
	            }
	            for (var k = 0; k < short_week.length; k++) {
	                $("#" + elementId + "_tb tr").append("<td ><span class='jui-datetimepicker-week' title='" + long_week[k] + "'>" + short_week[k] + "</span></td>");
	            }
	            for (var i = 0; i < 5; i++) {
	                $("#" + elementId + "_tb").append("<tr></tr>");
	                for (var j = 0; j < 7; j++) {
	                    $("#" + elementId + "_tb").find("tr:eq(" + (i + 1) + ")").append("<td><a href='#'></a></td>");
	                }
	            }
	            writeDate();
	            $("#" + elementId + "_prev").click(function () {
	                $("#" + elementId + "_tb a").removeClass("jui-datetimepicker-active");
	                m = $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val() - 1;
	                if (m == -1) {
	                    m = 11;
	                    y = $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val() - 1;
	                    $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").find("option").each(function () {
	                        $(this).removeAttr("selected"); //清空选择项                        
	                        if ($(this).val() == y)
	                            $(this).attr("selected", "selected");
	                    });
	                    $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val(y);
	                }
	                $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").find("option").each(function () {
	                    $(this).removeAttr("selected"); //清空选择项
	                    if ($(this).val() == m)
	                        $(this).attr("selected", "selected");
	                });
	                $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val(m);
	                $("#" + elementId + "_tb a").text("");//清空
	                writeDate();
	            }); //前翻
	            $("#" + elementId + "_next").bind("click", function () {
	                $("#" + elementId + "_tb").find("a").removeClass("jui-datetimepicker-active");
	                m = parseInt($("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val()) + 1;
	                if (m == 12) {
	                    m = 0;
	                    y = parseInt($("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val()) + 1;
	                    $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").find("option").each(function () {
	                        $(this).removeAttr("selected"); //清空选择项                        
	                        if ($(this).val() == y)
	                            $(this).attr("selected", "selected");
	                    });
	                    $("#" + elementId + "_yearDiv").children("select:eq(" + t + ")").val(y);
	                }
	                $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").find("option").each(function () {
	                    $(this).removeAttr("selected"); //清空选择项
	                    if ($(this).val() == m)
	                        $(this).attr("selected", "selected");
	                });
	                $("#" + elementId + "_yearDiv").children("select:eq(" + _t + ")").val(m);
	                $("#" + elementId + "_tb a").text("");//清空
	                writeDate();
	            });//后翻
	        }
	        //年月日时分秒
	        var ymdhms = function () {
	            e.css("width", "200px");
	            yMd();
	            var divBottom = "<div id='" + elementId + "_bottom' class='jui-datetimepicker-hms'><dl></dl></div>";
	            var time = "<dt id='" + elementId + "_lableTime'>Time:</dt><dd id='" + elementId + "_showTime'>00:00:00</dd>";
	            var hour = "<dt id='" + elementId + "_lableHour'>Hour:</dt><dd id='" + elementId + "_showHour'><div id='" + elementId + "_hourDiv' class='jui-datetimepicker-slider jui-datetimepicker-corner-all'><a href='#' style='left:0%;' class='jui-datetimepicker-handle jui-datetimepicker-corner-all'></a></div></dd>";
	            var minute = "<dt id='" + elementId + "_lableMinute'>Minute:</dt><dd id='" + elementId + "_showMinute'><div id='" + elementId + "_minuteDiv' class='jui-datetimepicker-slider jui-datetimepicker-corner-all'><a href='#' style='left:0%;' class='jui-datetimepicker-handle jui-datetimepicker-corner-all'></a></div></dd>";
	            var second = "<dt id='" + elementId + "_lableSecond'>Second:</dt><dd id='" + elementId + "_showSecond'><div id='" + elementId + "_secondDiv' class='jui-datetimepicker-slider jui-datetimepicker-corner-all'><a href='#' style='left:0%;' class='jui-datetimepicker-handle jui-datetimepicker-corner-all'></a></div></dd>";

	            $("#" + elementId + "_outDiv").append(divBottom);
	            $("#" + elementId + "_bottom").children("dl").append(time).append(hour).append(minute).append(second).find("div").addClass("jui-datetimepicker-hms");
	            $("#" + elementId + "_outDiv").append("<div class='jui-datetimepicker-content'></div>");
	            $(".jui-datetimepicker-content").append("<button type='button' id='" + elementId + "_btnNow' class='jui-datetimepicker-butNow jui-datetimepicker-corner-all'>现在</button><button type='button' id='" + elementId + "_btnDone' class='jui-datetimepicker-butDone jui-datetimepicker-corner-all'>完成</button>");
	            $("#" + elementId + "_btnNow").bind("click", function () {
	                var d = new Date();
	                var nowy = d.getFullYear();
	                var nowmo = d.getMonth() + 1;
	                var nowd = d.getDate();
	                var nowh = d.getHours();
	                var nowmi = d.getMinutes();
	                var nows = d.getSeconds();
	                if (nowh < 10)
	                    nowh = "0" + nowh;
	                if (nowmi < 10)
	                    nowmi = "0" + nowmi;
	                if (nows < 10)
	                    nows = "0" + nows;
	                $("#" + elementId + "_yearDiv").find("select").empty();
	                y = d.getFullYear();
	                m = d.getMonth();
	                addMonth();
	                addYear();
	                $("#" + elementId + "_tb a").text("");//清空
	                writeDate();
	                activeCss();//默认高亮当日
	                noCss();
	                switch (datetimeParse) {
	                    case 'china':
	                        e.val(nowy + "年" + nowmo + "月" + nowd + "日" + nowh + "点" + nowmi + "分" + nows + "秒"); break; //赋值      
	                    case 'europe':
	                        for (var i = 0; i < longMonthNames.length; i++) {
	                            if (nowmo == i + 1) {
	                                e.val(nowd + " " + longMonthNames[i] + "," + nowy + " " + nowh + ":" + nowmi + ":" + nows);
	                            }
	                        } break;
	                    case 'international':
	                        if (nowmo < 10) {
	                            if (nowd < 10) {
	                                e.val(nowy + "-0" + nowmo + "-0" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            } else {
	                                e.val(nowy + "-0" + nowmo + "-" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            }
	                        } else {
	                            if (parseInt($(this).text()) < 10) {
	                                e.val(nowy + "-" + nowmo + "-0" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            } else {
	                                e.val(nowy + "-" + nowmo + "-" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            }
	                        } break;
	                    default:
	                        if (nowmo < 10) {
	                            if (nowd < 10) {
	                                e.val(nowy + "-0" + (nowmo + 1) + "-0" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            } else {
	                                e.val(nowy + "-0" + (nowmo + 1) + "-" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            }
	                        } else {
	                            if (parseInt($(this).text()) < 10) {
	                                e.val(nowy + "-" + nowmo + "-0" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            } else {
	                                e.val(nowy + "-" + nowmo + "-" + nowd + " " + nowh + ":" + nowmi + ":" + nows);
	                            }
	                        }
	                }
	                $("#" + elementId + "_showTime").html(nowh + ":" + nowmi + ":" + nows);
	                $("#" + elementId + "_tb").find("tr:not(:eq(0))").find("td").find("a").each(function () {
	                    if ($(this).text() != nowd) {
	                        $(this).removeClass("jui-datetimepicker-active");
	                    }
	                });
	            });
	            $("#" + elementId + "_btnDone").bind("click", function () {
	                $("#" + elementId + "_outDiv").hide();
	            });

	        }

	        switch (datetimeType) {
	            case 'yyyy':
	                whenYYYY();
	                break;
	            case 'yyyy-MM':
	                yM();
	                break;
	            case 'yyyy-MM-dd':
	                yMd();
	                break;
	            case 'yyyy-MM-dd-hh-mm-ss':
	                ymdhms();
	                break;
	            default:
	                yMd();
	        }

	        //判断点击显示或总是显示
	        if (display == "click" || display == "") {
	            $("#" + elementId + "_outDiv").hide();
	            e.focus(function () {
	                $("#" + elementId + "_outDiv").show();
	            });
	        }
	        //只读  
	        if (readonly == true || readonly == null) {
	            e.attr("readonly", "readonly");
	        }
	        $("#" + elementId + "_outDiv").bind("selectstart", function () { return false; });//界面无法选中

	    });
	</script>
}

@section header{
}

@section left{
}

@section right{
}

@section footer{
}

@section scripts{
}

<h2>datetimepickerHtml</h2>
<input type="text" id="txt_datapicker" />

